# DO NOT USE THIS IN PRODUCTION ENVIRONMENTS!
OIDCSSLValidateServer Off
OIDCOAuthSSLValidateServer Off

OIDCClaimPrefix "OIDC-"
OIDCResponseType "id_token"
OIDCScope "openid email profile"
OIDCProviderMetadataURL "%OIDC_METADATA_URL%"
OIDCClientID "%OIDC_CLIENT_ID%"
OIDCClientSecret "%OIDC_CLIENT_SECRET%"
OIDCCryptoPassphrase "openstack"

OIDCRedirectURI "http://%HOST_IP%/identity/v3/auth/OS-FEDERATION/identity_providers/%IDP_ID%/protocols/openid/websso"
OIDCRedirectURI "http://%HOST_IP%/identity/v3/auth/OS-FEDERATION/websso/openid"

<LocationMatch "/identity/v3/auth/OS-FEDERATION/websso/openid">
    AuthType openid-connect
    Require valid-user
</LocationMatch>

<LocationMatch "/identity/v3/auth/OS-FEDERATION/identity_providers/%IDP_ID%/protocols/openid/websso">
    AuthType openid-connect
    Require valid-user
</LocationMatch>

OIDCOAuthClientID "%OIDC_CLIENT_ID%"
OIDCOAuthClientSecret "%OIDC_CLIENT_SECRET%"
OIDCOAuthVerifyJwksUri "%OIDC_JWKS_URL"

<Location ~ "/identity/v3/OS-FEDERATION/identity_providers/%IDP_ID%/protocols/openid/auth">
    AuthType oauth20
    Require valid-user
</Location>
